<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/paper-input/paper-input.html">
<link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="bower_components/iron-icons/iron-icons.html">
<link rel="import" href="bower_components/paper-styles/color.html">
<link rel="import" href="bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="bower_components/paper-menu/paper-menu.html">
<link rel="import" href="bower_components/paper-item/paper-item.html">
<link rel="import" href="bower_components/iron-collapse/iron-collapse.html">

<link rel="import" href="tei-model.html">

<!---->
<!--
`tei-elementSpec`
an ODD elementSpec element

@demo demo/index.html 
-->

<dom-module id="tei-elementSpec">
    <template>
        <style>
            :host {
                display: block;
                border: 1px solid #ddd;
                position: relative;
                margin-bottom: 20px;
                position: relative;
                border-radius: 14px;
                background: var(--paper-light-blue-500);
            }

            h2 {
                margin: 0;
                font-family: monospace;
                font-weight: 700;
                /*background: #03A9F4;*/
                /*background: var(--paper-light-blue-500);*/
                padding: 26px;
                color: white;
            }

            h2:before {
                position: absolute;
                content: 'elementSpec';
                font-size: 12px;
                font-style: italic;
                background: var( --paper-orange-500);
                padding: 2px 6px;
                top: 0;
                left: 0;
                border-bottom-right-radius: 4px;

            }

            /*
                  .element::before{
                    content:'elementSpec';
                    display: block;
                    font-size: 1em;
                  }
            */
            .test {
                position: absolute;
                right: 10px;
                top: 3px;
            }

            .mode {
                font-size: 12px;
                font-style: italic;
                font-weight: 300;
            }

            paper-icon-button{
                color:white;
            }
            #delete{
                position: absolute;
                top: 20px;
                right: 60px;
            }
            #add{
                position: absolute;
                top: 12px;
                right: 100px;
            }
            #collapse{
                position: absolute;
                top: 20px;
                right: 20px;
            }
        </style>
        <paper-menu-button id="add">
            <paper-icon-button icon="add" class="dropdown-trigger"></paper-icon-button>
            <paper-menu id="addmenu" class="dropdown-content">
                <paper-item>model</paper-item>
                <paper-item>modelGroup</paper-item>
                <paper-item>modelSequence</paper-item>
            </paper-menu>
        </paper-menu-button>
        <paper-icon-button id="delete" icon="clear"></paper-icon-button>
        <paper-icon-button id="collapse" icon="expand-more"></paper-icon-button>
        <h2>{{ident}} <span id="mode" class="mode"></span></h2>
        <!--<div>Mode: {{mode}}</div>-->
        <iron-collapse id="content">
            <content></content>
        </iron-collapse>

        <!--<h2 title="elementSpec">{{ident}}</h2>-->

    </template>

    <script>
        Polymer({

            is: 'tei-elementSpec',

            properties: {
                mode: {
                    type: String,
                    reflectToAttribute: true
                },
                ident: {
                    type: String,
                    reflectToAttribute: true
                }
            },

            listeners: {
                'delete.tap': 'deleteElementSpec',
                'collapse.tap': 'toggleContent'
            },

            attached: function () {
                this.listen(this.$.addmenu, 'tap', 'addModelItem');

                if (this.mode == 'add') {
                    this.$.mode.textContent = 'added'
                } else {
                    this.$.mode.textContent = 'changed'
                }
            },

            detached: function () {
                this.unlisten(this.$.addmenu, 'tap', 'addModelItem');
            },
            
            deleteElementSpec: function (e) {
                this.fire('deleteElementSpec',this);
            },

            addModelItem: function (e) {
                console.log(e.target.innerText.trim())
                var selection = e.target.innerText.trim();
                var newModel = document.createElement('tei-' + selection);
                this.$.content.appendChild(newModel);

                this.$.content.show();

            },

            toggleContent: function (e) {
                this.$.content.toggle();
            }
            

        });
    </script>
</dom-module>
